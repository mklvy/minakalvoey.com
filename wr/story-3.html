<html>
<head>
<title>The Waiting Room</title>
  <link rel="icon" type="image/x-icon" href="./img/wr-favicon.ico">
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<audio id='backgroundPlayer' autoplay loop>
  <source src='./audio/subliminal.mp3' type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
<body>
  <div class="roomTitleContainer">
    <div class='roomTitle' title='Back to the start page' style='color:black;' onclick='window.location.href="index.html"'>The Waiting Room</div>
  </div>
  <div class="storyText" onClick="goToRoom()">Only when the game on your phone didn’t progress to the next level, you noticed that it had been quiet for a while. The episode had stopped playing. You looked up, expecting to see the <span class="mono">Are you still watching</span> pop-up from Netflix, only to discover the buffering wheel was stuck at 99%. You tried reloading the page to no avail. The wifi icon had turned light grey, you toggled it off, waited a short while, toggled it back on. Nothing changed. You opened your phone to check the social media apps, but they didn’t refresh. The anxiety slowly rose in your body, and you slid yourself out of the dent to sit up on the couch.</div>
  <div id='idleScreen' class='idleScreenWhite hide'>
    <div class='idleQuestion' style='color:black'>Are you still playing "The Waiting Room"?</div>
    <div class='doorExit' style='background-image: url("./img/continue-white.jpg"); position: relative;top: 152px;left: 228px; background-color: white;' onclick='hideIdleScreen()'></div>
    <div id='exitText1' class='exitText' style='position: absolute; top: 70%; left: 200px;text-align: left; color: black;'>Continue reading</div>
    <div class='doorExit' style='position: absolute; top: 152px; right: 227px;background-image: url("./img/exit-game-white.jpg"); background-color: white;' onclick='window.location.href="index.html"'></div>
    <div id='exitText2' class='exitText' style='position: absolute; top: 70%; right: 220px; text-align: right; color: black;'>Exit</div>
  </div>
</body>
<script>
  document.getElementById('backgroundPlayer').currentTime = sessionStorage.audioTimestamp;

  function goToRoom() {
    var audioTimestamp = document.getElementById('backgroundPlayer').currentTime;
    sessionStorage.audioTimestamp = audioTimestamp;
    window.location.href = 'room-' + sessionStorage.nextRoom + '.html';
  }
  
  sessionStorage.script = sessionStorage.script + '</br></br>' + '<i>Only when the game on your phone didn\'t progress to the next level, you noticed that it had been quiet for a while. The episode had stopped playing. You looked up, expecting to see the \'Are you still watching\' pop-up from Netflix, only to discover the buffering wheel stuck at 99%. You tried reloading the page to no avail. The wifi icon had turned light grey, you toggled it off, waited a short while, toggled it back on. Nothing changed. You opened your phone to check the social media apps, but they didn\'t refresh. The anxiety slowly rose in your body, and you slid yourself out of the dent to sit up on the couch.</i>';

  function hideIdleScreen () {
    document.getElementById('idleScreen').classList.add('hide');    
  }

  function inactivityTime() {
    var time;
    window.onload = resetTimer;
    document.onmousemove = resetTimer;
    document.onkeypress = resetTimer;
    function showIdleScreen() {
      document.getElementById('idleScreen').classList.remove('hide');
    }
    function resetTimer() {
      clearTimeout(time);
      time = setTimeout(showIdleScreen, 60000)
    }
  };

  inactivityTime();
</script>
</html> 
