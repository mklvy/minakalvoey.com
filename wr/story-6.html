<html>
<head>
<title>The Waiting Room</title>
  <link rel="icon" type="image/x-icon" href="./img/wr-favicon.ico">
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<audio id='backgroundPlayer' autoplay loop>
  <source src='./audio/subliminal.mp3' type="audio/mpeg">
Your browser does not support the audio element.
</audio>
<body>
  <div class="roomTitleContainer">
    <div class='roomTitle' title='Back to the start page' style='color:black;' onclick='window.location.href="index.html"'>The Waiting Room</div>
  </div>
  <div class="storyText" onClick="goToRoom()">A strange sense that you knew this person, and that they knew you, made your stomach knot. You pushed it away and walked over to your bed. After reading the instructions once more, you locked your phone and laid down in a starfish position. No limbs touching, counting to 100. What place should you think of? Your tired and swollen eyes felt heavy. 77, 78, 79… Slowly you dozed off.</div>
  <div id='idleScreen' class='idleScreenWhite hide'>
    <div class='idleQuestion' style='color:black'>Are you still reading "The Waiting Room"?</div>
    <div class='doorExit' style='background-image: url("./img/continue-white.jpg"); position: relative;top: 152px;left: 228px; background-color: white;' onclick='hideIdleScreen()'></div>
    <div id='exitText1' class='exitText' style='position: absolute; top: 70%; left: 200px;text-align: left; color: black;'>Continue reading</div>
    <div class='doorExit' style='position: absolute; top: 152px; right: 227px;background-image: url("./img/exit-game-white.jpg"); background-color: white;' onclick='window.location.href="index.html"'></div>
    <div id='exitText2' class='exitText' style='position: absolute; top: 70%; right: 220px; text-align: right; color: black;'>Exit</div>
  </div>
</body>
<script>
  document.getElementById('backgroundPlayer').currentTime = sessionStorage.audioTimestamp;

  function goToRoom() {
    var audioTimestamp = document.getElementById('backgroundPlayer').currentTime;
    sessionStorage.audioTimestamp = audioTimestamp;
    sessionStorage.storyMode = 'false';
    sessionStorage.script = sessionStorage.script + '</br></br>' + '<i>A strange sense that you knew this person, and that they knew you, made your stomach knot. You pushed it away and walked over to your bed. After reading the instructions once more, you locked your phone and laid down in a starfish position. No limbs touching, counting to 100. What place should you think of? Your tired and swollen eyes felt heavy. 77, 78, 79… Slowly you dozed off.</i>';
    window.location.href = 'end.html';
  }

  function hideIdleScreen () {
    document.getElementById('idleScreen').classList.add('hide');    
  }

  function inactivityTime() {
    var time;
    window.onload = resetTimer;
    document.onmousemove = resetTimer;
    document.onkeypress = resetTimer;
    function showIdleScreen() {
      document.getElementById('idleScreen').classList.remove('hide');
    }
    function resetTimer() {
      clearTimeout(time);
      time = setTimeout(showIdleScreen, 60000)
    }
  };

  inactivityTime();
</script>
</html> 