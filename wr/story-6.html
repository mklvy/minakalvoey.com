<html>
<head>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<audio id='backgroundPlayer' autoplay loop>
  <source src='/public/audio/subliminal.mp3' type="audio/mpeg">
Your browser does not support the audio element.
</audio>
<body>
  <div class="roomTitleContainer">
    <div class='roomTitle' title='Back to the start page' style='color:black;' onclick='window.location.href="index.html"'>The Waiting Room</div>
  </div>
  <div class="storyText" onClick="goToRoom()">It didn't even cross your mind that this person seemed to know you, and you immediately walked over to your bed. You read the instructions once more, locked your phone and laid down in a starfish position. No limbs touching, counting to 100. Your eyes felt heavy, and you began dreaming of a far away place. 67, 68, 69, 70... Slowly you dozed off.</div>
  <div id='idleScreen' class='idleScreenWhite hide'>
    <div class='idleQuestion' style='color:black'>Are you still playing "The Waiting Room"?</div>
    <div class='doorExit' style='background-image: url("./img/continue-white.jpg"); position: relative;top: 152px;left: 228px; background-color: white;' onclick='hideIdleScreen()'></div>
    <div id='exitText1' class='exitText' style='position: absolute; top: 70%; left: 200px;text-align: left; color: black;'>Continue playing</div>
    <div class='doorExit' style='position: absolute; top: 152px; right: 227px;background-image: url("./img/exit-game-white.jpg"); background-color: white;' onclick='window.location.href="index.html"'></div>
    <div id='exitText2' class='exitText' style='position: absolute; top: 70%; right: 220px; text-align: right; color: black;'>Exit game</div>
  </div>
</body>
<script>
  document.getElementById('backgroundPlayer').currentTime = sessionStorage.audioTimestamp;

  function goToRoom() {
    var audioTimestamp = document.getElementById('backgroundPlayer').currentTime;
    sessionStorage.audioTimestamp = audioTimestamp;
    sessionStorage.storyMode = 'false';
    sessionStorage.script = sessionStorage.script + '</br></br>' + 'It didn\'t even cross your mind that this person seemed to know you, and you immediately walked over to your bed. You read the instructions once more, locked your phone and laid down in a starfish position. No limbs touching, counting to 100. Your eyes felt heavy, and you began dreaming of a far away place. 67, 68, 69, 70... Slowly you dozed off.';
    window.location.href = 'end.html';
  }

  function hideIdleScreen () {
    document.getElementById('idleScreen').classList.add('hide');    
  }

  function inactivityTime() {
    var time;
    window.onload = resetTimer;
    document.onmousemove = resetTimer;
    document.onkeypress = resetTimer;
    function showIdleScreen() {
      document.getElementById('idleScreen').classList.remove('hide');
    }
    function resetTimer() {
      clearTimeout(time);
      time = setTimeout(showIdleScreen, 60000)
    }
  };

  inactivityTime();
</script>
</html> 